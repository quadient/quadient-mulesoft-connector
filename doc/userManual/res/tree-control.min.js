var TreeControl=function(e){return{init:function(){var a=this;void 0==a.getTreeviewStorageMap()&&a.setTreeviewStorageMapByDefault(a.getTreeviewMap());a.buildTreeview(a.getTreeviewStorageMap(),function(){a.setCurrentLinkVisible(function(){a.setCurrentLinkChildrenVisible(function(){a.setTreeviewStorageMap(a.getTreeviewMap())})})});window.onhashchange=function(){a.setCurrentAnchorLinkId(function(){a.setCurrentLinkChildrenVisible(function(){a.setTreeviewStorageMap(a.getTreeviewMap())})})};for(var b=document.getElementsByClassName(CLASS_SIDEBAR_CONTENTS_NAVIGATION_HITAREA),
c=0;c<b.length;c++)b[c].addEventListener("click",function(){a.toggleTreeviewBranch(this)}),b[c].addEventListener("keypress",function(d){"Enter"===d.key&&a.toggleTreeviewBranch(this)}),b[c].addEventListener("mouseenter",function(){a.addClass(this.nextSibling,CLASS_HOVER)}),b[c].addEventListener("mouseleave",function(){a.removeClass(this.nextSibling,CLASS_HOVER)})},buildTreeview:function(a,b){a=a.split("");var c=document.getElementById(ID_SIDEBAR_CONTENTS_ROOT).querySelectorAll("ul");c.length!==a.length&&
console.log("WARNING: length of visible and stored TOC element does not match!");for(var d=0;d<c.length;d++)"0"===a[d]?(this.removeClass(c[d].parentElement,CLASS_SIDEBAR_CONTENTS_NAVIGATION_COLLAPSABLE),this.addClass(c[d].parentElement,CLASS_SIDEBAR_CONTENTS_NAVIGATION_EXPANDABLE),this.removeClass(c[d].parentElement.children[0],CLASS_SIDEBAR_CONTENTS_NAVIGATION_COLLAPSABLE_HITAREA),this.addClass(c[d].parentElement.children[0],CLASS_SIDEBAR_CONTENTS_NAVIGATION_EXPANDABLE_HITAREA)):(this.removeClass(c[d].parentElement,
CLASS_SIDEBAR_CONTENTS_NAVIGATION_EXPANDABLE),this.addClass(c[d].parentElement,CLASS_SIDEBAR_CONTENTS_NAVIGATION_COLLAPSABLE),this.removeClass(c[d].parentElement.children[0],CLASS_SIDEBAR_CONTENTS_NAVIGATION_EXPANDABLE_HITAREA),this.addClass(c[d].parentElement.children[0],CLASS_SIDEBAR_CONTENTS_NAVIGATION_COLLAPSABLE_HITAREA));b()},toggleTreeviewBranch:function(a){this.switchClass(a,CLASS_SIDEBAR_CONTENTS_NAVIGATION_EXPANDABLE_HITAREA,CLASS_SIDEBAR_CONTENTS_NAVIGATION_COLLAPSABLE_HITAREA);this.switchClass(a.parentElement,
CLASS_SIDEBAR_CONTENTS_NAVIGATION_EXPANDABLE,CLASS_SIDEBAR_CONTENTS_NAVIGATION_COLLAPSABLE);this.setTreeviewStorageMap(this.getTreeviewMap())},setTreeviewStorageMap:function(a){e.setStorageVariable(ID_STORAGE_TREEVIEW,a)},getTreeviewStorageMap:function(){return e.getStorageVariable(ID_STORAGE_TREEVIEW)},setTreeviewStorageMapByDefault:function(a){a=a.replace("1","0");e.setStorageVariableByDefault(ID_STORAGE_TREEVIEW,a)},getTreeviewMap:function(){for(var a=document.getElementById(ID_SIDEBAR_CONTENTS_ROOT).querySelectorAll("ul"),
b="",c=0;c<a.length;c++)b+=this.isElementHidden(a[c])?"0":"1";return b},setCurrentLinkVisible:function(a){var b=document.getElementById(ID_SIDEBAR_CONTENTS_ROOT).querySelector("#"+ID_SIDEBAR_CONTENTS_NAVIGATION_CURRENT);if(null!==b)for(;b.parentElement;)this.hasClass(b,CLASS_SIDEBAR_CONTENTS_NAVIGATION_EXPANDABLE)&&(this.removeClass(b,CLASS_SIDEBAR_CONTENTS_NAVIGATION_EXPANDABLE),this.addClass(b,CLASS_SIDEBAR_CONTENTS_NAVIGATION_COLLAPSABLE),this.removeClass(b.children[0],CLASS_SIDEBAR_CONTENTS_NAVIGATION_EXPANDABLE_HITAREA),
this.addClass(b.children[0],CLASS_SIDEBAR_CONTENTS_NAVIGATION_COLLAPSABLE_HITAREA)),b=b.parentElement;a()},setCurrentLinkChildrenVisible:function(a){var b=document.getElementById(ID_SIDEBAR_CONTENTS_ROOT).querySelector("#"+ID_SIDEBAR_CONTENTS_NAVIGATION_CURRENT);null!==b&&(this.removeClass(b,CLASS_SIDEBAR_CONTENTS_NAVIGATION_EXPANDABLE),this.addClass(b,CLASS_SIDEBAR_CONTENTS_NAVIGATION_COLLAPSABLE),this.removeClass(b.children[0],CLASS_SIDEBAR_CONTENTS_NAVIGATION_EXPANDABLE_HITAREA),this.addClass(b.children[0],
CLASS_SIDEBAR_CONTENTS_NAVIGATION_COLLAPSABLE_HITAREA));a()},setCurrentAnchorLinkId:function(a){const b=decodeURI(window.location.href).substring(window.location.href.lastIndexOf("/")+1),c=document.getElementById(ID_SIDEBAR_CONTENTS_ROOT).querySelector("#"+ID_SIDEBAR_CONTENTS_NAVIGATION_CURRENT);let d=document.querySelector("#"+ID_SIDEBAR_CONTENTS_ROOT+" a[href$='"+b+"']");d||=document.querySelector("#"+ID_SIDEBAR_CONTENTS_ROOT+" a[data-url$='"+b+"']");c&&c.removeAttribute("id");d&&d.parentElement.setAttribute("id",
ID_SIDEBAR_CONTENTS_NAVIGATION_CURRENT);a()},isElementHidden:function(a){return"none"===window.getComputedStyle(a).display},hasClass:function(a,b){return null!==a?-1<(" "+a.className+" ").indexOf(" "+b+" "):!1},removeClass:function(a,b){null!==a&&this.hasClass(a,b)&&a.classList.remove(b)},addClass:function(a,b){null!==a&&(this.hasClass(a,b)||a.classList.add(b))},switchClass:function(a,b,c){this.hasClass(a,b)&&!this.hasClass(a,c)?(this.removeClass(a,b),this.addClass(a,c)):(this.removeClass(a,c),this.addClass(a,
b))}}};
