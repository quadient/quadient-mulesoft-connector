window.onload=function(){function Y(d){function p(){return c.getBoundingClientRect().left}function y(){b.play();Q(!0);C.style.backgroundImage="url('./css/img/pause-icon.svg')";q=!0}function v(){b.pause();Q(!1);C.style.backgroundImage="url('./css/img/play-icon.svg')";q=!1}function D(a){b.currentTime=b.duration*(0!==a.pageX?(a.pageX-p())/c.offsetWidth:1)}function E(a){a=a.pageX-c.getBoundingClientRect().left;0<=a&&a<=c.offsetWidth&&5<=a&&(m.style.paddingLeft=a+"px");0>a&&(m.style.paddingLeft="5px");
a>c.offsetWidth-5&&(m.style.paddingLeft=c.offsetWidth-5+"px")}function z(a){5>a&&(a=5);0<=a&&a<=c.offsetWidth&&5<=a&&(m.style.paddingLeft=a+"px");0>a&&(m.style.paddingLeft="0px");a>c.offsetWidth-5&&(m.style.paddingLeft=c.offsetWidth-5+"px")}function r(){z(b.currentTime/b.duration*c.offsetWidth)}function F(){R()?w.style.backgroundImage="url('./css/img/compress-icon.svg')":w.style.backgroundImage="url('./css/img/expand-icon.svg')"}function Q(a){a?L=setInterval(function(){r();k();S()},200):clearInterval(L)}
function T(){m.style.paddingLeft="0px";R()?(w.style.backgroundImage="url('./css/img/expand-icon.svg')",document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitCancelFullScreen?document.webkitCancelFullScreen():document.msExitFullscreen?document.msExitFullscreen():document.exitFullscreen&&document.exitFullscreen()):(w.style.backgroundImage="url('./css/img/compress-icon.svg')",b.requestFullScreen?n.requestFullScreen():b.webkitRequestFullScreen?n.webkitRequestFullScreen():b.mozRequestFullScreen?
n.mozRequestFullScreen():b.msRequestFullscreen&&n.msRequestFullscreen());setTimeout(function(){r()},200)}function R(){return isBrowserIE()?n.offsetHeight!==window.innerHeight?!1:!0:document.mozFullScreen||document.webkitIsFullScreen||window.innerHeight===screen.height?!0:!1}function U(a){var g=b.duration*(0!==a.pageX?(a.pageX-p())/c.offsetWidth:1);Z.innerHTML=0>=g?formatTime("0"):formatTime(g);a.pageX<p()+35&&(A.style.left="0");a.pageX>=p()+35&&a.pageX<=p()+c.offsetWidth-35&&(A.style.left=a.pageX-
p()-35+"px");a.pageX>p()+c.offsetWidth-35&&(A.style.left=c.offsetWidth-70+"px")}function x(){b.muted?(b.muted=!1,G.style.backgroundImage="url('./css/img/volume-medium-icon.svg')",f.setStorageVariable(ID_STORAGE_VIDEO_VOLUME,"1")):(b.muted=!0,G.style.backgroundImage="url('./css/img/volume-off-icon.svg')",f.setStorageVariable(ID_STORAGE_VIDEO_VOLUME,"0"))}function k(){aa.innerHTML=0>=b.currentTime?formatTime("0"):formatTime(b.currentTime)}function V(){q&&v();b.currentTime=0;z(0);k()}function S(){var a=
b.currentTime,g=!1;if(null!==t){for(var B=0;B<t.cues.length;B++)a>t.cues[B].startTime&&a<t.cues[B].endTime&&(hasClass(l,CLASS_ACTIVE)?(u.style.visibility="visible",u.innerHTML=t.cues[B].text):u.style.visibility="hidden",g=!0);g||(u.style.visibility="hidden",u.innerHTML="")}}function M(a){a?(removeClass(l,CLASS_ACTIVE),f.setStorageVariable(ID_STORAGE_VIDEO_SUBTITLES_CASTING,"0")):(addClass(l,CLASS_ACTIVE),f.setStorageVariable(ID_STORAGE_VIDEO_SUBTITLES_CASTING,"1"));S()}var n=document.getElementById("video-container-"+
d),b=document.getElementById("video-"+d),H=0!==b.children.length?b.children[0].getAttribute("src"):null,c=document.getElementById("video-timeline-"+d),m=document.getElementById("video-playhead-"+d),A=document.getElementById("video-hover-time-cover-"+d),Z=document.getElementById("video-hover-time-"+d),W=document.getElementById("video-replay-"+d),C=document.getElementById("video-play-pause-"+d),G=document.getElementById("video-volume-"+d),aa=document.getElementById("video-time-actual-"+d),ba=document.getElementById("video-time-complete-"+
d),w=document.getElementById("video-fullscreen-"+d),l=document.getElementById("video-subtitles-"+d),h=document.getElementById("video-quality-"+d);d=b.parentNode;var I=document.createElement("div"),u=document.createElement("div");d.replaceChild(I,b);I.setAttribute("class","video-subtitles-wrapper");I.appendChild(b);I.appendChild(u);u.setAttribute("class","video-subtitles-container");var N=!1,q=!1,X=0,O="",t=null,L;null!==IFRAME_ELEMENT&&IFRAME_ELEMENT.setAttribute("allowfullscreen","");if(null!==H){var J=
new XMLHttpRequest;J.open("GET",H,!1);J.onloadend=function(){O=J.responseText;""!==O&&(t=(new WebVTTParser).parse(O,"chapters"),null!==t&&(l.style.display="block",f.setStorageVariableByDefault(ID_STORAGE_VIDEO_SUBTITLES_CASTING,"0"),M("0"===f.getStorageVariable(ID_STORAGE_VIDEO_SUBTITLES_CASTING)),null!==l&&(l.addEventListener("click",function(){M(hasClass(l,CLASS_ACTIVE))}),l.addEventListener("keypress",function(a){"Enter"===a.key&&M(hasClass(l,CLASS_ACTIVE))}))))};J.send(null)}var e=b.getAttribute("data-source");
H=640>screen.width;if(null!==e)if(e=e.split("|"),2!==e.length)h.style.display="none",1===e.length?b.src=e[0]:(console.log("Error: video source - unsuspected count of sources"),2<e.length&&(b.src=e[0]));else{null===f.getStorageVariable(ID_STORAGE_VIDEO_QUALITY)?H?(b.src=e[1],h.style.backgroundImage="url('./css/img/quality-sd.svg')",f.setStorageVariableByDefault(ID_STORAGE_VIDEO_QUALITY,"sd")):(b.src=e[0],h.style.backgroundImage="url('./css/img/quality-hd.svg')",f.setStorageVariableByDefault(ID_STORAGE_VIDEO_QUALITY,
"hd")):"hd"===f.getStorageVariable(ID_STORAGE_VIDEO_QUALITY)?(b.src=e[0],h.style.backgroundImage="url('./css/img/quality-hd.svg')"):(b.src=e[1],h.style.backgroundImage="url('./css/img/quality-sd.svg')");h.addEventListener("click",function(){a()});h.addEventListener("keypress",function(g){"Enter"===g.key&&a()});function a(){X=b.currentTime;b.getAttribute("src")===e[0]?(b.src=e[1],h.style.backgroundImage="url('./css/img/quality-sd.svg')",f.setStorageVariable(ID_STORAGE_VIDEO_QUALITY,"sd")):(b.src=e[0],
h.style.backgroundImage="url('./css/img/quality-hd.svg')",f.setStorageVariable(ID_STORAGE_VIDEO_QUALITY,"hd"));b.load();r();b.onloadedmetadata=function(){b.paused&&q&&y()}}}else h.style.display="none",console.log("Error: video source - no source found");f.setStorageVariableByDefault(ID_STORAGE_VIDEO_VOLUME,"1");b.load();"0"===f.getStorageVariable(ID_STORAGE_VIDEO_VOLUME)?b.muted||x():b.muted&&x();k();C.addEventListener("click",function(){!0===b.paused?y():v()});C.addEventListener("keypress",function(a){"Enter"===
a.key&&(!0===b.paused?y():v())});c.addEventListener("click",function(a){D(a);E(a);k()});m.addEventListener("mousedown",function(a){a.preventDefault();q&&b.pause();N=!0;window.addEventListener("mousemove",E,!0);window.addEventListener("mousemove",D,!0);window.addEventListener("mousemove",k,!1)},!1);window.addEventListener("mouseup",function(a){a.preventDefault();!0===N&&(q&&b.play(),E(a),window.removeEventListener("mousemove",E,!0),window.removeEventListener("mousemove",D,!0),window.removeEventListener("mousemove",
k,!1),D(a));N=!1},!1);w.addEventListener("click",function(){T()});w.addEventListener("keypress",function(a){"Enter"===a.key&&T()});document.addEventListener("webkitfullscreenchange",function(){r();F()});document.addEventListener("mozfullscreenchange",function(){r();F()});document.addEventListener("fullscreenchange",function(){r();F()});document.addEventListener("MSFullscreenChange",function(){r();F()});b.addEventListener("ended",function(){q&&(v(),b.currentTime=0,clearTimeout(L),z(0),k())});G.addEventListener("click",
x,!1);G.addEventListener("keypress",function(a){"Enter"===a.key&&x()});W.addEventListener("click",V,!1);W.addEventListener("keypress",function(a){"Enter"===a.key&&V()});b.onloadeddata=function(){b.currentTime=X;ba.innerHTML=0>=b.duration?formatTime("0"):formatTime(b.duration)};b.addEventListener("click",function(){b.paused?y():v()});n.addEventListener("keydown",function(a){32===a.keyCode&&a.preventDefault()});n.addEventListener("keyup",function(a){32===a.keyCode&&(a.preventDefault(),b.paused?y():
v())});n.addEventListener("keydown",function(a){38===a.keyCode&&(a.preventDefault(),b.muted&&x());40===a.keyCode&&(a.preventDefault(),b.muted||x());if(37===a.keyCode){a.preventDefault();var g=0<b.currentTime-5?b.currentTime-5:0;b.currentTime=g;z(g/b.duration*c.offsetWidth);k()}39===a.keyCode&&(a.preventDefault(),g=b.currentTime+5<b.duration?b.currentTime+5:b.duration,b.currentTime=g,z(g/b.duration*c.offsetWidth),k())});c.addEventListener("mouseenter",function(a){A.style.visibility="visible";U(a)},
!1);c.addEventListener("mouseleave",function(){A.style.visibility="hidden"},!1);c.addEventListener("mousemove",function(a){U(a)},!1)}for(var P=document.querySelectorAll("video"),f=new Storage(isCookieSupported),K=0;K<P.length;K++)Y(P[K].id.substring(P[K].id.lastIndexOf("-")+1))};
